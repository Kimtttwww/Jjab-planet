<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="proposeMapper">


	<!-- 채용 공고 지원을 위한 INSERT 쿼리 -->
	<insert id="insertPropose" parameterType="map">
		INSERT INTO PROPOSE (PROPOSE_NO, PROPOSER, RECEIVER, PROPOSE_TYPE)
		VALUES (SEQ_PROPOSE.NEXTVAL, #{proposer}, #{receiver}, #{proposeType})
	</insert>



	<!-- 이력서 존재 여부 확인 쿼리 -->
	<!-- 특정 userNo에 대해 MEMBER와 RESUME 테이블을 JOIN (FROM_TITLE)존재여부확인 -->
	<!-- 결과는 boolean 값으로 반환됨 이력서 하나이상존재시true 아니면 false -->
	<select id="checkResumeExists" parameterType="int"
		resultType="boolean">
		SELECT
		CASE WHEN COUNT(R.FORM_TITLE) > 0 THEN TRUE ELSE FALSE END
		FROM MEMBER M
		LEFT JOIN RESUME R ON M.USER_NO = R.WORKER_NO
		WHERE M.USER_NO = #{userNo}
	</select>


</mapper>   
